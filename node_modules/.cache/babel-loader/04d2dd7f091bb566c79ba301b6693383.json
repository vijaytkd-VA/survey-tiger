{"ast":null,"code":"import _toConsumableArray from\"C:/Users/lenovo/Downloads/survey-tiger/survey-tiger/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/lenovo/Downloads/survey-tiger/survey-tiger/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import TypeSelector from\"./TypeSelector\";import Question from\"./Question\";import Options from\"./Options\";import{useState}from\"react\";import{useNavigate}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateSurvey=function CreateSurvey(_ref){var squestions=_ref.squestions,setSquestions=_ref.setSquestions;var history=useNavigate();var getRandom=function getRandom(){return Math.floor(Math.random()*1000+1);};var defaultOptionsState=[{uid:getRandom(),value:\"\"},{uid:getRandom(),value:\"\"}];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),qText=_useState2[0],setQtext=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),qType=_useState4[0],setQtype=_useState4[1];var _useState5=useState(defaultOptionsState),_useState6=_slicedToArray(_useState5,2),options=_useState6[0],setOptions=_useState6[1];var addOptions=function addOptions(){var newOption={uid:getRandom(),value:\"\"};var updatedOptions=_toConsumableArray(options);updatedOptions.push(newOption);setOptions(updatedOptions);};var deleteOptions=function deleteOptions(){if(options.length===2){alert(\"Error: A select type question should have atleast 2 options\");}else{var updatedOptions=_toConsumableArray(options);updatedOptions.pop();setOptions(updatedOptions);}};var updateOptionText=function updateOptionText(id,text){var updatedOptions=_toConsumableArray(options);var changeIndex=updatedOptions.findIndex(function(x){return x.uid===id;});updatedOptions[changeIndex].value=text;setOptions(updatedOptions);};var updateSurveyQuestion=function updateSurveyQuestion(){var newSurveyQuestion=_toConsumableArray(squestions);var newQ={qtext:qText,qtype:qType,options:options};newSurveyQuestion.push(newQ);setSquestions(newSurveyQuestion);setQtype(0);setQtext(\"\");setOptions(defaultOptionsState);};var publish=function publish(){updateSurveyQuestion();history(\"/published\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(TypeSelector,{qtype:qType,setQtype:setQtype}),qType!==0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Question,{onTextUpdate:setQtext}),options.map(function(opt,key){return/*#__PURE__*/_jsx(Options,{uid:opt.uid,addOptions:addOptions,deleteOptions:deleteOptions,updateText:updateOptionText},key);}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary m-1\",onClick:function onClick(){return updateSurveyQuestion();},children:\"Add Question\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary m-1\",onClick:function onClick(){return publish();},children:\"Publish\"})]}):null]});};export default CreateSurvey;","map":{"version":3,"names":["TypeSelector","Question","Options","useState","useNavigate","CreateSurvey","squestions","setSquestions","history","getRandom","Math","floor","random","defaultOptionsState","uid","value","qText","setQtext","qType","setQtype","options","setOptions","addOptions","newOption","updatedOptions","push","deleteOptions","length","alert","pop","updateOptionText","id","text","changeIndex","findIndex","x","updateSurveyQuestion","newSurveyQuestion","newQ","qtext","qtype","publish","map","opt","key"],"sources":["C:/Users/lenovo/Downloads/survey-tiger/survey-tiger/src/components/CreateSurvey.js"],"sourcesContent":["import TypeSelector from \"./TypeSelector\";\nimport Question from \"./Question\";\nimport Options from \"./Options\";\nimport { useState } from \"react\";\nimport { useNavigate } from \"react-router\";\n\nconst CreateSurvey = ({ squestions, setSquestions }) => {\n  const history = useNavigate();\n  const getRandom = () => {\n    return Math.floor(Math.random() * 1000 + 1);\n  };\n  const defaultOptionsState = [\n    { uid: getRandom(), value: \"\" },\n    { uid: getRandom(), value: \"\" },\n  ];\n  const [qText, setQtext] = useState(\"\");\n  const [qType, setQtype] = useState(0);\n  const [options, setOptions] = useState(defaultOptionsState);\n\n  const addOptions = () => {\n    let newOption = {\n      uid: getRandom(),\n      value: \"\",\n    };\n    let updatedOptions = [...options];\n    updatedOptions.push(newOption);\n    setOptions(updatedOptions);\n  };\n\n  const deleteOptions = () => {\n    if (options.length === 2) {\n      alert(\"Error: A select type question should have atleast 2 options\");\n    } else {\n      let updatedOptions = [...options];\n      updatedOptions.pop();\n      setOptions(updatedOptions);\n    }\n  };\n\n  const updateOptionText = (id, text) => {\n    let updatedOptions = [...options];\n    let changeIndex = updatedOptions.findIndex((x) => x.uid === id);\n    updatedOptions[changeIndex].value = text;\n    setOptions(updatedOptions);\n  };\n\n  const updateSurveyQuestion = () => {\n    let newSurveyQuestion = [...squestions];\n    let newQ = {\n      qtext: qText,\n      qtype: qType,\n      options: options,\n    };\n    newSurveyQuestion.push(newQ);\n    setSquestions(newSurveyQuestion);\n    setQtype(0);\n    setQtext(\"\");\n    setOptions(defaultOptionsState);\n  };\n\n  const publish = () => {\n    updateSurveyQuestion();\n    history(\"/published\");\n  };\n\n  return (\n    <div className=\"container\">\n      <TypeSelector qtype={qType} setQtype={setQtype} />\n\n      {qType !== 0 ? (\n        <>\n          <Question onTextUpdate={setQtext} />\n\n          {options.map((opt, key) => (\n            <Options\n              key={key}\n              uid={opt.uid}\n              addOptions={addOptions}\n              deleteOptions={deleteOptions}\n              updateText={updateOptionText}\n            />\n          ))}\n          <button\n            className=\"btn btn-primary m-1\"\n            onClick={() => updateSurveyQuestion()}\n          >\n            Add Question\n          </button>\n          <button className=\"btn btn-primary m-1\" onClick={() => publish()}>\n            Publish\n          </button>\n        </>\n      ) : null}\n    </div>\n  );\n};\n\nexport default CreateSurvey;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}